<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="assets/styles.css">
  <link rel="icon" type="image/x-icon" href="https://cdn.glimpseportal.io/assets/g-green.svg" />

  <script async src="https://www.googletagservices.com/tag/js/gpt.js"></script>
  <script async src="https://cdn.glimpsezero.io/scripts/prebid.js"></script>
  <script async src="https://cdn.glimpsezero.io/scripts/zero.js"></script>

<script>
    const units = [
      {
        div: "unit-01",
        code: "/21789678234/gz_demo_sponsorship_300x250",
        mediaTypes: {
          banner: {
            sizes: [[300, 250]],
          },
        },
        bids: [
          {
            bidder: "glimpse",
          },
        ],
      },
      {
        div: "unit-02",
        code: "/21789678234/gz_demo_prebid_300x250",
        mediaTypes: {
          banner: {
            sizes: [[300, 250]],
          },
        },
        bids: [
          {
            bidder: "glimpse",
          },
        ],
      },
    ]

      // Setup Glimpse Zero
    var zjs = window.zjs || {}
    zjs.cmd = window.zjs.cmd || []

    zjs.cmd.push(() => {
      zjs.setPubId("jp57")
      zjs.onEvent("adServed", () => window.postMessage("zjs_serve"))
      const [unmatched, matched] = zjs.pretarget(units)
      runHeaderBidding(unmatched)
    })

    var pbjs = pbjs || {}
    pbjs.que = pbjs.que || []

    function runHeaderBidding(unmatched) {
      pbjs.que.push(function () {
        pbjs.addAdUnits(unmatched)
        pbjs.requestBids({
          bidsBackHandler: initAdserver,
          timeout: 1500,
        })
      })
    }

    function initAdserver() {
      if (pbjs.initAdserverSet) return
      pbjs.initAdserverSet = true
      googletag.cmd.push(function () {
        pbjs.que.push(function () {
          pbjs.setTargetingForGPTAsync()
          googletag.pubads().refresh()
        })
      })
    }
    // in case PBJS doesn't load
    setTimeout(function () {
      initAdserver()
    }, 3000)

    var googletag = googletag || {}
    googletag.cmd = googletag.cmd || []

    googletag.cmd.push(function () {
      units.forEach(({ code, mediaTypes, div }) => {
        googletag
          .defineSlot(code, mediaTypes.banner.sizes, div)
          .addService(googletag.pubads())
      })
      googletag.pubads().disableInitialLoad()
      googletag.pubads().enableSingleRequest()
      googletag.enableServices()
    })
  </script>

  <title>Glimpse Zero Demo</title>
</head>
<body>
  <noscript>You need to enable Javascript for this website's features to work properly</noscript>
  <header>
    <img class="glimpse-logo" src="assets/logo.svg" />
    <h1 class="heading">Glimpse Zero - Reduce Then Offset</h1>
  </header>
  <main>
    <section class="information page-information">
      <p>Page load time: <span id="page-load-time">?</span>s <span id="page-load-emoji">üêå</span></p>
      <p><span id="total-carbon-savings">0</span>% less carbon</p>
    </section>
    <section class="ads">
      <section class="ad-box">
        <div class="unit" id="unit-01">
          <script type="text/javascript">
            googletag.cmd.push(function () {
              googletag.display("unit-01")
            })
          </script>
        </div>
        <aside class="information ad-information">
          <p id="unit-01-type">Postmatch ‚ùå</p>
        </aside>
      </section>
      <section class="ad-box">
        <div class="unit" id="unit-02">
          <script type="text/javascript">
            googletag.cmd.push(function () {
              googletag.display("unit-02")
            })
          </script>
        </div>
        <aside class="information ad-information">
          <p id="unit-02-type">Postmatch ‚ùå</p>
        </aside>
      </section>
    </section>
  </main>
  <footer>
    ¬© Glimpse Protocol <script>document.write(new Date().getFullYear())</script>
  </footer>
  <script src="src/measurement.js" type="module"></script>
</body>
</html>